!function(){var t=function(t){var n;return function(e){return n||t(n={exports:{},parent:e},n.exports),n.exports}},n=t((function(t,n){var e=c.document;t.exports=e&&e.documentElement})),e=t((function(t,n){var e=c.document,r=y(e)&&y(e.createElement);t.exports=function(t){return r?e.createElement(t):{}}})),r=Math.ceil,o=Math.floor,i=function(t){return isNaN(t=+t)?0:(t>0?o:r)(t)},u=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},c={},f=c="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=f);var l={},a=l={version:"2.6.11"};"number"==typeof __e&&(__e=a);var s=function(t,n,e){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=function(t){if(!y(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},d=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),v=!d&&!h((function(){return 7!=Object.defineProperty(e({})("div"),"a",{get:function(){return 7}}).a})),g={},b=Object.defineProperty;g.f=d?Object.defineProperty:function(t,n,e){if(p(t),n=function(t,n){if(!y(t))return t;var e,r;if("function"==typeof(e=t.toString)&&!y(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!y(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n),p(e),v)try{return b(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t};var m=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},w=d?function(t,n,e){return g.f(t,n,m(1,e))}:function(t,n,e){return t[n]=e,t},_={}.hasOwnProperty,O=function(t,n){return _.call(t,n)},j={},x=function(t,n,e){var r,o,i,u=t&x.F,f=t&x.G,a=t&x.S,y=t&x.P,p=t&x.B,h=t&x.W,d=f?l:l[n]||(l[n]={}),v=d.prototype,g=f?c:a?c[n]:(c[n]||{}).prototype;for(r in f&&(e=n),e)(o=!u&&g&&void 0!==g[r])&&O(d,r)||(i=o?g[r]:e[r],d[r]=f&&"function"!=typeof g[r]?e[r]:p&&o?s(i,c):h&&g[r]==i?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(i):y&&"function"==typeof i?s(Function.call,i):i,y&&((d.virtual||(d.virtual={}))[r]=i,t&x.R&&v&&!v[r]&&w(v,r,i)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128,j=x;var A,k={},E={}.toString,S=function(t){return E.call(t).slice(8,-1)},M=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==S(t)?t.split(""):Object(t)},T=function(t){return M(u(t))},P=Math.min,I=function(t){return t>0?P(i(t),9007199254740991):0},C=Math.max,F=Math.min,B=c["__core-js_shared__"]||(c["__core-js_shared__"]={});(A=function(t,n){return B[t]||(B[t]=void 0!==n?n:{})})("versions",[]).push({version:l.version,mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"});var R=0,L=Math.random(),W=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++R+L).toString(36))},z=A("keys"),G=function(t){return z[t]||(z[t]=W(t))},N=(!1,function(t,n,e){var r=T(t),o=I(r.length),u=function(t,n){return(t=i(t))<0?C(t+n,0):F(t,n)}(e,o);for(0;o>u;u++)if(u in r&&r[u]===n)return u||0;return-1}),U=G("IE_PROTO"),q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),D=Object.keys||function(t){return function(t,n){var e,r=T(t),o=0,i=[];for(e in r)e!=U&&O(r,e)&&i.push(e);for(;n.length>o;)O(r,e=n[o++])&&(~N(i,e)||i.push(e));return i}(t,q)},H=d?Object.defineProperties:function(t,n){p(t);for(var e,r=D(n),o=r.length,i=0;o>i;)g.f(t,e=r[i++],n[e]);return t},J=G("IE_PROTO"),K=function(){},Q=function(){var t,r=e({})("iframe"),o=q.length;for(r.style.display="none",n({}).appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Q=t.F;o--;)delete Q.prototype[q[o]];return Q()},V=Object.create||function(t,n){var e;return null!==t?(K.prototype=p(t),e=new K,K.prototype=null,e[J]=t):e=Q(),void 0===n?e:H(e,n)},X={},Y=A("wks"),Z=c.Symbol,$="function"==typeof Z;(X=function(t){return Y[t]||(Y[t]=$&&Z[t]||($?Z:W)("Symbol."+t))}).store=Y;var tt,nt=g.f,et=X("toStringTag"),rt=function(t,n,e){t&&!O(t=e?t:t.prototype,et)&&nt(t,et,{configurable:!0,value:n})},ot={};w(ot,X("iterator"),(function(){return this})),tt=function(t,n,e){t.prototype=V(ot,{next:m(1,e)}),rt(t,n+" Iterator")};var it=function(t){return Object(u(t))},ut=G("IE_PROTO"),ct=Object.prototype,ft=Object.getPrototypeOf||function(t){return t=it(t),O(t,ut)?t[ut]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ct:null},lt=X("iterator"),at=!([].keys&&"next"in[].keys()),st=function(){return this},yt=(!0,function(t,n){var e,r,o=String(u(t)),c=i(n),f=o.length;return c<0||c>=f?"":(e=o.charCodeAt(c))<55296||e>56319||c+1===f||(r=o.charCodeAt(c+1))<56320||r>57343?o.charAt(c):o.slice(c,c+2)});!function(t,n,e,r,o,i,u){tt(e,n,(function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=yt(n,e),this._i+=t.length,{value:t,done:!1})}));var c,f=function(t){if(!at&&t in a)return a[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",a=t.prototype,s=a[lt]||a["@@iterator"]||o,y=s||f(o);s&&(c=ft(s.call(new t)))!==Object.prototype&&c.next&&rt(c,l,!0),k[n]=y,k[l]=st}(String,"String",(function(t){this._t=String(t),this._i=0}));var pt=function(t,n,e,r){try{return r?n(p(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&p(o.call(t)),n}},ht=X("iterator"),dt=Array.prototype,vt=function(t){return void 0!==t&&(k.Array===t||dt[ht]===t)},gt=function(t,n,e){n in t?g.f(t,n,m(0,e)):t[n]=e},bt=X("toStringTag"),mt="Arguments"==S(function(){return arguments}()),wt=X("iterator"),_t=l.getIteratorMethod=function(t){if(null!=t)return t[wt]||t["@@iterator"]||k[function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),bt))?e:mt?S(n):"Object"==(r=S(n))&&"function"==typeof n.callee?"Arguments":r}(t)]},Ot=X("iterator"),jt=!1;try{var xt=[7][Ot]();xt.return=function(){jt=!0},Array.from(xt,(function(){throw 2}))}catch(t){}j(j.S+j.F*!function(t,n){if(!jt)return!1;var e=!1;try{var r=[7],o=r[Ot]();o.next=function(){return{done:e=!0}},r[Ot]=function(){return o},function(t){Array.from(t)}(r)}catch(t){}return e}(),"Array",{from:function(t){var n,e,r,o,i=it(t),u="function"==typeof this?this:Array,c=arguments.length,f=c>1?arguments[1]:void 0,l=void 0!==f,a=0,y=_t(i);if(l&&(f=s(f,c>2?arguments[2]:void 0,2)),null==y||u==Array&&vt(y))for(e=new u(n=I(i.length));n>a;a++)gt(e,a,l?f(i[a],a):i[a]);else for(o=y.call(i),e=new u;!(r=o.next()).done;a++)gt(e,a,l?pt(o,f,[r.value,a],!0):r.value);return e.length=a,e}});var At,kt={default:l.Array.from,__esModule:!0},Et={__esModule:!0},St=(At=kt)&&At.__esModule?At:{default:At};Et.default=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return(0,St.default)(t)};var Mt={};Mt.f=Object.getOwnPropertySymbols;var Tt={};Tt.f={}.propertyIsEnumerable;var Pt=Object.assign,It=!Pt||h((function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach((function(t){n[t]=t})),7!=Pt({},t)[e]||Object.keys(Pt({},n)).join("")!=r}))?function(t,n){for(var e=it(t),r=arguments.length,o=1,i=Mt.f,u=Tt.f;r>o;)for(var c,f=M(arguments[o++]),l=i?D(f).concat(i(f)):D(f),a=l.length,s=0;a>s;)c=l[s++],d&&!u.call(f,c)||(e[c]=f[c]);return e}:Pt;j(j.S+j.F,"Object",{assign:It});var Ct={default:l.Object.assign,__esModule:!0},Ft=Tt.f,Bt=(!1,function(t){for(var n,e=T(t),r=D(e),o=r.length,i=0,u=[];o>i;)n=r[i++],d&&!Ft.call(e,n)||u.push(e[n]);return u});j(j.S,"Object",{values:function(t){return Bt(t)}});var Rt={default:l.Object.values,__esModule:!0},Lt={__esModule:!0,default:function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}};j(j.S+j.F*!d,"Object",{defineProperty:g.f});var Wt,zt=l.Object,Gt={__esModule:!0},Nt=(Wt={default:function(t,n,e){return zt.defineProperty(t,n,e)},__esModule:!0})&&Wt.__esModule?Wt:{default:Wt};Gt.default=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,Nt.default)(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();var Ut=Qt(kt),qt=Qt(Et),Dt=Qt(Ct),Ht=Qt(Rt),Jt=Qt(Lt),Kt=Qt(Gt);function Qt(t){return t&&t.__esModule?t:{default:t}}var Vt=["limegreen","darkorange","mediumorchid","dodgerblue","orangered","cornflowerblue","tomato"],Xt={zType:[[1,1,0],[0,1,1],[0,0,0]],sType:[[0,2,2],[2,2,0],[0,0,0]],iType:[[0,3,0,0],[0,3,0,0],[0,3,0,0],[0,3,0,0]],lType:[[4,0,0],[4,0,0],[4,4,0]],jType:[[0,0,5],[0,0,5],[0,5,5]],oType:[[6,6],[6,6]],tType:[[0,7,0],[7,7,7],[0,0,0]]},Yt=function(){function t(n,e,r){(0,Jt.default)(this,t),this.cells=n,this.position={x:e,y:r},this.isAlive=!0}return(0,Kt.default)(t,[{key:"rotate",value:function(){for(var t=[],n=0;n<this.cells.length;n++){t[n]=[];for(var e=0;e<this.cells.length;e++)t[n][e]=this.cells[this.cells.length-1-e][n]}this.cells=t}},{key:"moveBlockByEvent",value:function(t){switch(t.key){case"ArrowLeft":this.position.x--;break;case"ArrowRight":this.position.x++;break;case"ArrowDown":this.position.y+this.cells.length<20&&this.position.y++;break;case"ArrowUp":this.rotate()}}},{key:"findCollison",value:function(t){var n=this,e=this.position,r=e.x,o=e.y;this.cells.forEach((function(e,i){e.forEach((function(e,u){e&&(o+i>=20||t[o+i][r+u])&&(n.isAlive=!1)}))}))}}]),t}();Yt.timeToChange=1e3;var Zt=function(t){document.getElementById("score").innerHTML=t},$t=function(t,n){t.forEach((function(t,e){t.forEach((function(t,r){n.fillStyle=t?Vt[t-1]:"lightblue",n.strokeStyle="#555",n.lineWidth=.2;var o=[30*r,30*e,30,30];n.fillRect.apply(n,o),n.strokeRect.apply(n,o)}))}))},tn=window.requestAnimationFrame,nn=0,en=0,rn={x:0,y:0},on=[[]],un=function(t,n,e,r,o){for(var i=0;i<t.length;){for(var u=0;u<t[i].length;)n[e+i][r+u]=o?t[i][u]?0:n[e+i][r+u]:t[i][u]?t[i][u]:n[e+i][r+u],u++;i++}},cn=0,fn=function(t,n){return(0,Ut.default)({length:t},(function(){return(0,Ut.default)({length:n},(function(){return 0}))}))};window.onload=function(){!function t(n,e,r){if(!e){var o=(0,Ht.default)(Xt),i=o[o.length*Math.random()|0],u=(10-i.length)/2|0;e=new Yt(i,u,0),rn={x:u,y:0},console.log("block",e),addEventListener("keydown",(function(t){return e.moveBlockByEvent.bind(e)(t)}))}var c=n.ctx,f=n.field,l=e.position;if(r-en>1e3/24)if(12==++nn&&(nn=0,e&&e.isAlive?l.y++:e=null),en=r,un(on,f,rn.y,rn.x,!0),function(t,n){var e=t.cells,r=t.position,o=r.x,i=r.y;return!e.some((function(t,e){return t.some((function(t,r){if(t&&o+r<0||t&&o+r>=10||t&&n[i+e][o+r])return!0}))}))}(e,f)||(l.x=rn.x,e.cells=on),l.y>rn.y&&(l.y=rn.y+1),e.findCollison(f),e.isAlive)un(e.cells,f,l.y,l.x),$t(f,c),rn=(0,Dt.default)({},l),on=[].concat(e.cells);else if(rn.y>e.cells.length-1)un(e.cells,f,rn.y,rn.x),n.field=function(t){var n=t.filter((function(t){return t.some((function(t){return 0===t}))})),e=t.length-n.length;Zt(cn+=100*e);var r=fn(e,10);return[].concat((0,qt.default)(r),(0,qt.default)(n))}(f),$t(n.field,c),e=null;else{un(on,f,rn.y,rn.x);var a=e.cells.filter((function(t){return!t.every((function(t){return!t}))})).slice(-rn.y);un(a,f,0,l.x),$t(n.field,c),setTimeout((function(){alert("Game Over")}),0),n.field=fn(24,10),Zt(0),e=null}tn((function(r){return t(n,e,r)}))}({ctx:document.getElementById("map").getContext("2d"),field:fn(24,10)})}}();
//# sourceMappingURL=main.bundle.js.map
